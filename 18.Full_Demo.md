# 18. Full Demo <!-- omit in TOC -->

Este laboratorio crea una aplicaci贸n web y un api conectado a la base de datos MongoDB del punto
[17. StatefulSet](./17.%20StatefulSet.md)

## 1. Opcional, Construir la base de datos.
En caso de no existir la Base de datos MongoDB.
```vim
chmod +x kubelabs-files-demo/17/run.sh && ./kubelabs-files-demo/17/run.sh
```

## 2. API
Contrucci贸n del API GraphQL de conexi贸n con BD y web app.

### 2.1. Ingress
```yaml
ruta: api.kube1.kubelabs.tk
puerto: 3000
```

### 2.2. Servicio
```yaml
tipo: ClusterIP
puerto: 3000
targetPort: 3000
```

### 2.3. Servicio
```yaml
tipo: ClusterIP
puerto: 3000
targetPort: 3000
```

### 2.4. Deployment
```yaml
replicas: 3
imagen: cachac/kube_api
puerto: 3000
```
### 2.5. Resultados:
```vim
NAME                          READY   STATUS
deploy-api-646bcff868-nvlsn   1/1     Running
deploy-api-646bcff868-zsqn9   1/1     Running
deploy-api-646bcff868-ltxbf   1/1     Running
```
> Consultar api.kube1.kubelabs.tk/graphql

Debe abrir la interfaz de consulta GraphQL.

Para la conexi贸n con base de datos, se utiliza el ***DNS***:

> mongodb-sts-0.mongodb-svc.default.svc.cluster.local

### 2.6. Opcional: Ver Ejemplos del API:
[api-svc.yml](./kubelabs-files-demo/18/api-svc.yml)
[api-svc.yml](./kubelabs-files-demo/18/api-svc.yml)
[api-deploy.yml](./kubelabs-files-demo/18/api-deploy.yml)


## 3. WebApp

### 3.1. Ingress
```yaml
ruta: kube1.kubelabs.tk
puerto: 80
```

### 3.2. Servicio
```yaml
tipo: ClusterIP
puerto: 3000
targetPort: 3000
```

### 3.3. Servicio
```yaml
tipo: ClusterIP
puerto: 3000
targetPort: 3000
```

### 3.4. Deployment
```yaml
replicas: 3
imagen: cachac/kube_api
puerto: 3000
```
### 3.5. Resultados:
