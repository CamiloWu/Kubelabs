# 15. Networking <!-- omit in TOC -->

> [Ver los archivos demo](./kubelabs-files-demo)

> [Documentaci贸n Oficial](https://kubernetes.io/docs/concepts/cluster-administration/networking/)

## 1. Ingress Controller

> [Documentaci贸n Oficial](https://kubernetes.io/docs/concepts/services-networking/ingress/)
### 1.1. Crear un Ingress Controller utilizando el archivo

> [kubelabs-files-demo/ingress-definition.yml](./kubelabs-files-demo/ingress-definition.yml)

Validar la configuraci贸n

- rules
  - host
  - path
  - pathType: Prefix (/) 贸 Exact
  - backend: service name y port number
- service: name, ClusterIP, port
- deployment: template labels

```vim
kubectl apply -f kubelabs-files-demo/ingress-definition.yml
```

### 1.2. Validar resultados
```vim
kubectl get ingress http-ingress
```
Resultado:
> Hosts: kube1.kubelabs.tk ...
```
NAME           CLASS    HOSTS                                     ADDRESS     PORTS   AGE
http-ingress   public   kube1.kubelabs.tk,www.kube1.kubelabs.tk   127.0.0.1   80      63m
```

```vim
```
Resultado:
```yaml
Default backend:  default-http-backend:80 (<error: endpoints "default-http-backend" not found>)
Rules:
  Host                   Path  Backends
  ----                   ----  --------
  kube1.kubelabs.tk
                         /   svc-kube-1:80 (10.1.126.109:80,10.1.126.66:80,10.1.126.69:80 + 1 more...)
  www.kube1.kubelabs.tk
                         /   svc-kube-1:80 (10.1.126.109:80,10.1.126.66:80,10.1.126.69:80 + 1 more...)
```

```vim
kubectl describe svc svc-kube-1
```
Resultado:
```yaml
Port:              main  80/TCP
TargetPort:        80/TCP
Endpoints:         10.1.126.109:80,10.1.126.66:80,10.1.126.69:80 + 1 more...
```

### 1.3. Probar en browser

```vim
kube<n>.kubelabs.tk
```

### 1.3. Probar en browser una ruta aleatoria, ejemplo:

```vim
kube<n>.kubelabs.tk/otra
```
Resultado:
~~~~
404 Not Found
~~~~
Esto se debe a que no hay una ruta por defecto definida.

