# 7. CLI comandos rápidos <!-- omit in TOC -->

> [Ver los archivos demo](./kubelabs-files-demo)

En ocasiones, abrir y editar archivos YAML en consola puede ser lento y tedioso, por lo que conocer el CLI es beneficioso en términos de tiempo y eficiencia.

Sin embargo, este método no es funcional para escenarios de automatización. En otras palabras, para un flujo CI/CD no es necesario aplicar continuamente comandos en la terminal.

## 1. Crear el archivo deployment-definition.yml

### 1.1. Crear un pod de imagen nginx
> --image=nginx

```vim
kubectl run nginx --image=nginx
```

## 2. Generar un Manifiesto YAML en consola

```vim
kubectl run nginx --image=nginx --dry-run=client -o yaml
```
> -o yaml = muestra en pantalla la configuración del objeto.

> --dry-run=client = no crea el objeto, solamente emula su creación.

## 3. Crear un Deployment
```vim
kubectl create deployment --image=nginx nginx
```

## 4. Generar el manifiesto del Deployment
```vim
kubectl create deployment --image=nginx nginx --dry-run=client -o yaml
```
## 5. Validar el Deployment
```vim
k get deploy -o wide
```
> -o wide = muestra mas información.

## 6. Generar un Deployment con 4 Replicas y bajar a un archivo YAML llamado nginx-deployment.yaml

```vim
kubectl create deployment --image=nginx nginx --replicas=4 --dry-run=client -o yaml > nginx-deployment.yaml
```
> --replicas=4

> --dry-run=client

> -o yaml > ***nginx-deployment.yaml*** = exporta a un archivo

## 7. Crear un objeto basado en el manifiesto descargado
```vim
kubectl create -f nginx-deployment.yaml
```
Error conocido:
> error when creating "nginx-deployment.yaml": deployments.apps "nginx" already exists

## 8. Recrear el objeto usando appy
```vim
k apply -f nginx-deployment.yaml
```

> create = imperativo ó en línea de comando

> apply = declarativo e imperativo

## 9. Limpiar
```k
kubectl delete all --all
```
